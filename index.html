<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tela de Pagamento - NexCommerce</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #1e1b4b;
        margin: 0;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding-top: 40px;
    }

    h1 {
        font-weight: 700;
        color: #ff7b00;
        margin-bottom: 30px;
        font-size: 2.5rem;
    }

    .payment-wrapper {
        display: flex;
        gap: 40px;
        background: white;
        padding: 30px 40px;
        border-radius: 10px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        max-width: 900px;
        width: 90%;
        align-items: flex-start;
        justify-content: center;
        flex-wrap: wrap;
    }

    /* Canvas do cart√£o */
    #cardCanvas {
        border-radius: 15px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        background: linear-gradient(135deg, #007bff, #00d4ff);
        width: 350px;
        height: 200px;
        flex-shrink: 0;
    }

    .payment-container {
        width: 350px;
        display: flex;
        flex-direction: column;
    }

    .payment-container h2 {
        margin-bottom: 20px;
        color: #333;
        text-align: center;
    }

    /* Op√ß√µes de pagamento */
    .payment-methods {
        margin-bottom: 20px;
        text-align: center;
    }

    .payment-methods label {
        margin: 0 15px;
        font-weight: bold;
        cursor: pointer;
        color: #ff7b00;
    }

    input[type="radio"] {
        margin-right: 8px;
        cursor: pointer;
    }

    /* Formul√°rio cart√£o */
    form {
        display: flex;
        flex-direction: column;
    }

    .form-group {
        margin-bottom: 15px;
    }

    label {
        display: block;
        font-weight: bold;
        margin-bottom: 6px;
        color: #555;
    }

    input[type="text"],
    input[type="tel"],
    input[type="number"],
    input[type="month"] {
        width: 100%;
        padding: 10px 12px;
        border: 1.5px solid rgb(0, 0, 0);
        border-radius: 5px;
        font-size: 1rem;
        transition: border-color 0.3s ease;
    }

    input[type="text"]:focus,
    input[type="tel"]:focus,
    input[type="number"]:focus,
    input[type="month"]:focus {
        border-color: #007bff;
        outline: none;
    }

    .row {
        display: flex;
        gap: 20px;
    }

    .row .form-group {
        flex: 1;
    }

    button {
        width: 100%;
        background-color: #1e1b4b;
        color: white;
        font-weight: bold;
        font-size: 1.1rem;
        padding: 12px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        margin-top: 15px;
        transition: background-color 0.3s ease;
    }

    button:hover {
        background-color: #ff7b00;
    }

    /* Se√ß√£o PIX */
    .pix-section {
        text-align: center;
    }

    #pixCanvas {
        margin: 0 auto 15px auto;
        display: block;
        border: 2px solid #007bff;
        border-radius: 10px;
        background: white;
        width: 180px;
        height: 180px;
    }

    .pix-code-container {
        display: flex;
        gap: 10px;
        justify-content: center;
        align-items: center;
    }

    #pixCode {
        width: 220px;
        font-family: monospace;
        font-size: 0.9rem;
        padding: 8px;
        border: 1.5px solid #ccc;
        border-radius: 5px;
        user-select: all;
    }

    #copyBtn {
        background-color: #007bff;
        border: none;
        color: white;
        padding: 8px 14px;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    #copyBtn:hover {
        background-color: #0056b3;
    }

    /* Responsividade */
    @media (max-width: 800px) {
        .payment-wrapper {
            flex-direction: column;
            align-items: center;
        }
        #cardCanvas, .payment-container {
            width: 90%;
        }
    }

</style>
</head>
<body>

<h1>NexCommerce</h1>

<div class="payment-wrapper">

    <canvas id="cardCanvas" width="350" height="200"></canvas>

    <div class="payment-container">
        <h2>Pagamento</h2>

        <div class="payment-methods">
            <label><input type="radio" name="paymentMethod" value="card" checked /> Cart√£o de Cr√©dito</label>
            <label><input type="radio" name="paymentMethod" value="pix" /> Pix</label>
        </div>

        <!-- Formul√°rio Cart√£o -->
        <form id="paymentForm">
            <div class="form-group">
                <label for="cardName">Nome no Cart√£o</label>
                <input type="text" id="cardName" placeholder="Nome completo" required />
            </div>
            <div class="form-group">
                <label for="cardNumber">N√∫mero do Cart√£o</label>
                <input type="tel" id="cardNumber" placeholder="1234 5678 9012 3456" pattern="[0-9\s]{13,19}" maxlength="19" required />
            </div>
            <div class="row">
                <div class="form-group">
                    <label for="expiryDate">Validade</label>
                    <input type="month" id="expiryDate" required />
                </div>
                <div class="form-group">
                    <label for="cvv">CVV</label>
                    <input type="number" id="cvv" placeholder="123" min="100" max="999" required />
                </div>
            </div>
            <button type="submit">Pagar</button>
        </form>

        <!-- Se√ß√£o PIX (oculta inicialmente) -->
        <div class="pix-section" style="display:none;">
            <canvas id="pixCanvas" width="180" height="180"></canvas>
            <div class="pix-code-container">
                <input type="text" id="pixCode" readonly value="00020126580014BR.GOV.BCB.PIX0114+55119999999990205Pagamento5204000053039865405100.005802BR5913NexCommerce6009S√£o Paulo62070503***63041D3D" />
                <button id="copyBtn" title="Copiar c√≥digo Pix">Copiar</button>
            </div>
        </div>

    </div>

</div>

<script>
    // Cart√£o canvas
    const canvas = document.getElementById('cardCanvas');
    const ctx = canvas.getContext('2d');
    const nexCommerceRightPadding = 60;

    function formatCardNumber(value) {
        return value.replace(/\D/g, '').replace(/(.{4})/g, '$1 ').trim();
    }

    function drawCard(name, number, expiry) {
        const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
        gradient.addColorStop(0, '#007bff');
        gradient.addColorStop(1, '#00d4ff');
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        ctx.shadowColor = "transparent";
        ctx.shadowBlur = 0;
        ctx.fillStyle = 'white';

        ctx.font = '22px monospace';
        ctx.fillText(number || '#### #### #### ####', 20, 100);

        ctx.font = '18px Arial';
        ctx.fillText(name.toUpperCase() || 'NOME DO TITULAR', 20, 150);

        ctx.font = '16px Arial';
        ctx.fillText(expiry || 'MM/AA', 20, 180);

        const text = 'NexCommerce';
        const textWidth = ctx.measureText(text).width;
        ctx.font = 'bold 20px Arial';
        ctx.fillText(text, canvas.width - textWidth - nexCommerceRightPadding, 40);
    }

    drawCard('', '', '');

    // Atualiza cart√£o ao digitar
    const cardNameInput = document.getElementById('cardName');
    const cardNumberInput = document.getElementById('cardNumber');
    const expiryDateInput = document.getElementById('expiryDate');

    function updateCanvas() {
        const name = cardNameInput.value || '';
        let number = formatCardNumber(cardNumberInput.value);
        let expiry = expiryDateInput.value;
        if(expiry) {
            const parts = expiry.split('-');
            expiry = parts[1].slice(2) + '/' + parts[0].slice(2);
        } else {
            expiry = '';
        }
        drawCard(name, number, expiry);
    }

    cardNameInput.addEventListener('input', updateCanvas);
    cardNumberInput.addEventListener('input', updateCanvas);
    expiryDateInput.addEventListener('input', updateCanvas);

    // Form submit cart√£o
    const form = document.getElementById('paymentForm');
    form.addEventListener('submit', function(e) {
        e.preventDefault();
        alert('Pagamento com cart√£o processado com sucesso! üí≥');
        form.reset();
        drawCard('', '', '');
    });

    // PIX canvas e c√≥digo
    const pixCanvas = document.getElementById('pixCanvas');
    const pixCtx = pixCanvas.getContext('2d');

    function drawPixQRCode(ctx) {
        const size = pixCanvas.width;
        ctx.clearRect(0, 0, size, size);

        // Fundo branco
        ctx.fillStyle = 'white';
        ctx.fillRect(0, 0, size, size);

        // Padr√£o simples tipo QR code (preto e branco)
        const blockSize = 18;
        for(let y=0; y<size; y+=blockSize) {
            for(let x=0; x<size; x+=blockSize) {
                if((x/blockSize + y/blockSize) % 2 === 0) {
                    ctx.fillStyle = 'black';
                    ctx.fillRect(x, y, blockSize, blockSize);
                }
            }
        }

        // Tr√™s grandes quadrados estilo QR code nos cantos
        function drawCornerSquare(x, y) {
            ctx.fillStyle = 'black';
            ctx.fillRect(x, y, blockSize*3, blockSize*3);
            ctx.fillStyle = 'white';
            ctx.fillRect(x + blockSize, y + blockSize, blockSize, blockSize);
        }

        drawCornerSquare(0, 0);
        drawCornerSquare(size - blockSize*3, 0);
        drawCornerSquare(0, size - blockSize*3);
    }

    drawPixQRCode(pixCtx);

    // Alternar formas de pagamento
    const paymentRadios = document.querySelectorAll('input[name="paymentMethod"]');
    const formCard = document.getElementById('paymentForm');
    const pixSection = document.querySelector('.pix-section');

    paymentRadios.forEach(radio => {
        radio.addEventListener('change', () => {
            if(radio.value === 'pix' && radio.checked) {
                formCard.style.display = 'none';
                pixSection.style.display = 'block';
            } else if(radio.value === 'card' && radio.checked) {
                pixSection.style.display = 'none';
                formCard.style.display = 'flex';
            }
        });
    });

    // Bot√£o copiar Pix
    const copyBtn = document.getElementById('copyBtn');
    const pixCodeInput = document.getElementById('pixCode');

    copyBtn.addEventListener('click', () => {
        pixCodeInput.select();
        pixCodeInput.setSelectionRange(0, 99999);
        navigator.clipboard.writeText(pixCodeInput.value).then(() => {
            alert('C√≥digo Pix copiado para √°rea de transfer√™ncia!');
        });
    });
</script>

</body>
</html>
